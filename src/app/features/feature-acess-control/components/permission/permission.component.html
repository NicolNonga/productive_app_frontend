<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <div class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <h1 class="m-0 text-dark">
              <i class="fa icon icon-permissaos"></i> Permissões
            </h1>
          </div>
          <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
              <li class="breadcrumb-item"><a href="#">Operações</a></li>
              <li class="breadcrumb-item active">Controle Acesso</li>
              <li class="breadcrumb-item active">Permissões</li>
            </ol>
          </div>
        </div>
      </div>
    </div>

    <!-- section filtros-->

    <section class="content my-mb-100">
      <div class="row">
        <div class="col-12 col-sm-6 col-md-3">
          <a href="javascricpt:void(0)" style="color: #333">
            <div class="info-box">
              <span class="info-box-icon bg-info elevation-1"
                ><i class="fa fa-gear"></i
              ></span>
              <div class="info-box-content">
                <span class="info-box-text">Logs</span>
                <span class="info-box-number">
                  10
                  <small>%</small>
                </span>
              </div>
            </div>
          </a>
        </div>
        <div class="col-12 col-sm-6 col-md-3">
          <a href="javascricpt:void(0)" style="color: #333">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-danger elevation-1"
                ><i class="fa fa-book"></i
              ></span>
              <div class="info-box-content">
                <span class="info-box-text">Roles</span>
                <span class="info-box-number">41,410</span>
              </div>
            </div>
          </a>
        </div>

        <!-- fix for small devices only -->
        <div class="clearfix hidden-md-up"></div>

        <div class="col-12 col-sm-6 col-md-3">
          <a href="javascricpt:void(0)" style="color: #333">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-success elevation-1"
                ><i class="fa fa-lock"></i
              ></span>

              <div class="info-box-content">
                <span class="info-box-text">Permissions</span>
                <span class="info-box-number">760</span>
              </div>
            </div>
          </a>
        </div>

        <div class="col-12 col-sm-6 col-md-3">
          <a href="javascricpt:void(0)" style="color: #333">
            <div class="info-box mb-3">
              <span class="info-box-icon bg-warning elevation-1"
                ><i class="fa fa-permissaos text-white"></i
              ></span>

              <div class="info-box-content">
                <span class="info-box-text">Permissões</span>
                <span class="info-box-number"></span>
              </div>
            </div>
          </a>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-12 col-12">
          <div class="modall modal-info fadee" data-backdrop="static">
            <div class="modal-dialog" style="max-width: 100%; margin-bottom: 0">
              <div
                class="modal-content"
                style="box-shadow: 0 0 0rem rgba(0, 0, 0, 0.5)"
              >
                <!-- Modal Header -->
                <div class="modal-header">
                  <h4 class="modal-title">Filtro de Dados</h4>
                </div>
                <!-- Modal body -->
                <div class="modal-body">
                  <div class="row">
                    <div class="col-md-1 col-xs-3">
                      <div class="form-group">
                        <select name="perPage" class="form-control">
                          <option value="1">Entrada</option>
                          <option value="5" selected>5</option>
                          <option value="10">10</option>
                          <option value="25">25</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-3 col-xs-3">
                      <div class="form-group">
                        <input
                          type="text"
                          name="search"
                          placeholder="Pesquisar..."
                          class="form-control"
                        />
                        <i
                          class="fa fa-search"
                          style="
                            float: right;
                            margin: -30px 10px 0 0px;
                            font-size: 22px;
                            color: #777;
                          "
                        ></i>
                      </div>
                    </div>

                    <div class="col-md-2 col-xs-3">
                      <div class="form-group">
                        <select name="plataforma" class="form-control">
                          <option>Access Plataforma</option>
                          <option [value]="true">Mobile</option>
                          <option [value]="false">Web</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-2 col-xs-3">
                      <div class="form-group">
                        <select name="plataforma" class="form-control">
                          <option>Perfil</option>
                          <option></option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-1 col-xs-3">
                      <div class="form-group">
                        <select name="orderBy" class="form-control">
                          <option>Ordenar</option>
                          <option value="nome">Nome</option>
                          <option value="created_at">Data</option>
                          <option value="nome">Nome</option>
                          <option value="permissaoname">permissaoname</option>
                        </select>
                      </div>
                    </div>

                    <div class="col-md-3 col-xs-3">
                      <div class="form-group">
                        <div class="input-group">
                          <div class="btn-group">
                            <div class="btn-group">
                              <button
                                type="button"
                                class="btn btn-info dropdown-toggle dropdown-icon btn-flat"
                                data-toggle="dropdown"
                                aria-expanded="false"
                              >
                                <i class="fa fa-download"></i> Exportação
                              </button>
                              <div
                                class="dropdown-menu"
                                x-placement="bottom-start"
                                style="left: 40px"
                              >
                                <a class="dropdown-item" href="javascript:void(0)"
                                  ><i class="fa fa-file-pdf-o"></i> PDF</a
                                >
                                <a class="dropdown-item" href="javascript:void(0)"
                                  ><i class="fa fa-file-excel-o"></i> Excel</a
                                >
                              </div>
                            </div>

                            <button type="button" class="btn btn-info btn-flat">
                              <i class="fa fa-print"></i> Imprimir
                            </button>

                            <button
                              type="button"
                              class="btn btn-warning btn-flat btn-cadastrar"
                            >
                              <i class="fa fa-eraser"></i> Limpar
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <div class="col-lg-12 col-12">
      <div class="modall modal-info fadee" data-backdrop="static">
        <div class="modal-dialog" style="max-width: 100%">
          <div
            class="modal-content"
            style="box-shadow: 0 0 0rem rgba(0, 0, 0, 0.5)"
          >
            <div class="modal-header">
              <h4 class="modal-title">TABELA DAS PERMISSÕES</h4>

              <div class="card-tools">
                <div class="btn-group">
                  <button
                  type="button"
                  class="btn btn-warning btn-flat btn-cadastrar"
                  data-toggle="modal"
                  data-target="#createPermission"
                >
                  <i class="fa fa-permissaos"></i> Registar Nova Permissão
                </button>
                  <button
                    class="btn btn-secondary dropdown-toggle dropdown-icon btn-flat"
                    data-toggle="dropdown"
                    type="button"
                  >
                    <i class="fa fa-download"></i>
                    Exportação
                  </button>
                  <div
                    class="dropdown-menu"
                    style="left: 40px"
                    x-placement="bottom-start"
                  >
                    <a class="dropdown-item" href="javascript:void(0)"
                      ><i class="fa fa-file-excel-o"></i>
                      Excel
                    </a>
                  </div>
                </div>
                <button (click)="this.realoadPermissions()" class="btn btn-secondary btn-flat" type="button">
                  <i class="fa fa-refresh"></i>
                  Recarregar</button
                >
              </div>
            </div>

            <!-- Modal body -->
            <div class="modal-body">
              <div class="modal-body">
                <table class="table table-hover table-bordered text-center" >
                  <tbody>
                    <tr class="bg-secondary" >
                      <th>#</th>
                      <th>Nome </th>
                      <th>Descrição</th>
                      <th>Estado</th>
                      <th>Data de criação</th>
                      <th>Acção</th>
                    </tr>
                    @for (permissao of this.permissions().data; track permissao.id; let index = $index) {

                    <tr >
                        <td>{{index + 1}}</td>
                        <td class="bg-style">{{ permissao.name }}</td>
                        <td>{{ permissao.description ? permissao.description : "sem descrição" }}</td>
                        <td>
                            <span class="badge badge-success" *ngIf=" permissao?.isActive">Activa</span>
                            <span class="badge badge-danger" *ngIf="!permissao?.isActive">Desativada</span>
                        </td>
                        <td>{{ permissao.createdAt| date : 'M/d/yy' }}</td>
                        <td>
                          <div class="btn-group">
                            <button
                              class="btn btn-secondary btn-flat btn-sm btn-block"
                              data-toggle="dropdown"
                              type="button"
                            >
                              Opções</button
                            ><button
                              aria-expanded="false"
                              class="btn btn-secondary btn-flat dropdown-toggle"
                              data-toggle="dropdown"
                              type="button"
                            >
                              <span class="caret"></span
                              ><span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <div
                              class="dropdown-menu drop-style"
                              role="menu"
                              x-placement="bottom-start"
                            >
                              <a
                                class="dropdown-item btn-sm"
                                href="javascript:void(0)"
                                ><i class="fa fa-edit"></i> Editar </a
                                >
                                @if (permissao.isActive) {
                                    <a class="dropdown-item btn-sm"  (click)="desablePermission(permissao.id)" href="javascript:void(0)"
                                ><i class="fa fa-toggle-off"></i> Inactivar </a
                              >
                                }
                               @if (!permissao.isActive) {
                                <a class="dropdown-item btn-sm"  (click)="this.enablePermission(permissao.id)" href="javascript:void(0)"
                                ><i class="fa fa-toggle-off"></i> Activar </a
                              >
                               }
                            </div>
                          </div>
                        </td>


                  </tr>
                } @empty {
                     <p> No products added yet</p>
                }
                  </tbody>
                </table>
              </div>
            </div>
            <div class="modal-footer">
              <div class="row" style="width: 100%">
                <div class="col-sm-12 col-md-5">
                  <div class="dataTables_info">Mostrando de</div>
                </div>
                <div class="col-sm-12 col-md-7">
                  <div class="pull-right">
                    <!--  <pagination-controls (pageChange)="getPageFilterData($event)" previousLabel="Anterior" maxSize="6"
                      nextLabel="Proximo" directionLinks="true" responsive="true"></pagination-controls> -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>




    <!-- TABLE SECTION-->
  </div>
   <app-create-or-edit-permission (permissionCreated)="this.realoadPermissions()"></app-create-or-edit-permission>
